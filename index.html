<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BittCode - Learn Programming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .admin-edit {
            border: 2px dashed #3b82f6;
            position: relative;
        }
        .admin-edit::after {
            content: "‚úèÔ∏è Editable";
            position: absolute;
            top: -10px;
            right: -10px;
            background: #3b82f6;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-2">
                    <div class="flex items-center bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                        </svg>
                        <span class="font-bold text-lg">Bitt</span><span class="font-light text-lg">Code</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showLogin()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">Login</button>
                    <button onclick="showRegister()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Register</button>
                    <div id="user-menu" class="hidden">
                        <span id="welcome-text" class="text-gray-700 mr-4"></span>
                        <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-5xl font-bold mb-6" id="hero-title">Master Programming Skills with BittCode</h2>
            <p class="text-xl mb-8 max-w-3xl mx-auto" id="hero-subtitle">Join thousands of students learning C/C++, Java, HTML, CSS, JavaScript, Python and more with our comprehensive courses and expert instructors at BittCode Academy.</p>
            <div class="flex gap-4 justify-center flex-wrap">
                <button onclick="scrollToCourses()" class="bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition text-lg">Explore Courses</button>
                <button onclick="showSampleTest()" class="bg-yellow-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-yellow-600 transition text-lg">üìù Take Sample Test</button>
                <button onclick="showCodeEditor()" class="bg-green-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-600 transition text-lg">üíª Code Editor</button>
            </div>
        </div>
    </section>

    <!-- Courses Section -->
    <section id="courses" class="py-16">
        <div class="max-w-7xl mx-auto px-4">
            <h3 class="text-4xl font-bold text-center mb-12 text-gray-800" id="courses-title">Our Programming Courses</h3>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="courses-grid">
                <!-- Courses will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="bg-white py-16">
        <div class="max-w-7xl mx-auto px-4">
            <h3 class="text-4xl font-bold text-center mb-12 text-gray-800" id="features-title">Why Choose BittCode Academy?</h3>
            <div class="grid md:grid-cols-3 gap-8" id="features-grid">
                <div class="text-center p-6">
                    <div class="text-4xl mb-4">üéØ</div>
                    <h4 class="text-xl font-semibold mb-3">Expert Instructors</h4>
                    <p class="text-gray-600">Learn from industry professionals with years of experience</p>
                </div>
                <div class="text-center p-6">
                    <div class="text-4xl mb-4">üìö</div>
                    <h4 class="text-xl font-semibold mb-3">Comprehensive Curriculum</h4>
                    <p class="text-gray-600">From basics to advanced concepts, we cover everything</p>
                </div>
                <div class="text-center p-6">
                    <div class="text-4xl mb-4">üèÜ</div>
                    <h4 class="text-xl font-semibold mb-3">Certification</h4>
                    <p class="text-gray-600">Get industry-recognized certificates upon completion</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold mb-6 text-center">Login</h3>
            <form id="login-form">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" id="login-id" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="login-password" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="flex items-center justify-between">
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">Login</button>
                    <button type="button" onclick="closeModal('login-modal')" class="text-gray-600 hover:text-gray-800">Cancel</button>
                </div>
            </form>

        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold mb-6 text-center">Register</h3>
            <form id="register-form">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Full Name</label>
                    <input type="text" id="reg-name" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" id="reg-email" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="reg-password" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Phone Number</label>
                    <input type="tel" id="reg-phone" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Account Type</label>
                    <select id="reg-type" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" required>
                        <option value="student">Student</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="flex items-center justify-between">
                    <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition">Register</button>
                    <button type="button" onclick="closeModal('register-modal')" class="text-gray-600 hover:text-gray-800">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Course Enrollment Modal -->
    <div id="enrollment-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-2xl font-bold mb-6 text-center">Course Enrollment</h3>
            <div id="enrollment-content">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="fixed inset-0 bg-white hidden z-50 overflow-y-auto">
        <div class="bg-blue-600 text-white p-4">
            <div class="flex justify-between items-center">
                <h2 class="text-2xl font-bold">Admin Panel</h2>
                <button onclick="closeAdminPanel()" class="bg-red-600 px-4 py-2 rounded hover:bg-red-700">Close</button>
            </div>
        </div>
        
        <div class="p-6">
            <div class="grid md:grid-cols-5 gap-4 mb-8">
                <button onclick="showAdminSection('content')" class="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700">Edit Content</button>
                <button onclick="showAdminSection('courses')" class="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700">Manage Courses</button>
                <button onclick="showAdminSection('tests')" class="bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700">Manage Tests</button>
                <button onclick="showAdminSection('students')" class="bg-orange-600 text-white p-4 rounded-lg hover:bg-orange-700">Student Management</button>
                <button onclick="showAdminSection('lectures')" class="bg-indigo-600 text-white p-4 rounded-lg hover:bg-indigo-700">Video Lectures</button>
            </div>

            <!-- Content Management -->
            <div id="admin-content" class="admin-section hidden">
                <h3 class="text-xl font-bold mb-4">Edit Website Content</h3>
                <div class="grid gap-4">
                    <div>
                        <label class="block font-semibold mb-2">Site Title</label>
                        <input type="text" id="edit-site-title" class="w-full p-2 border rounded" value="BittCode Academy">
                        <button onclick="updateContent('site-title', 'edit-site-title')" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded">Update</button>
                    </div>
                    <div>
                        <label class="block font-semibold mb-2">Hero Title</label>
                        <input type="text" id="edit-hero-title" class="w-full p-2 border rounded" value="Master Programming Skills with BittCode">
                        <button onclick="updateContent('hero-title', 'edit-hero-title')" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded">Update</button>
                    </div>
                    <div>
                        <label class="block font-semibold mb-2">Hero Subtitle</label>
                        <textarea id="edit-hero-subtitle" class="w-full p-2 border rounded h-20">Join thousands of students learning C/C++, Java, HTML, CSS, JavaScript, Python and more with our comprehensive courses and expert instructors at BittCode Academy.</textarea>
                        <button onclick="updateContent('hero-subtitle', 'edit-hero-subtitle')" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded">Update</button>
                    </div>
                    
                    <div class="border-t pt-4 mt-4">
                        <h4 class="text-lg font-bold mb-3">üí≥ Payment Settings</h4>
                        <div class="grid gap-4">
                            <div>
                                <label class="block font-semibold mb-2">UPI ID</label>
                                <input type="text" id="edit-upi-id" class="w-full p-2 border rounded" value="9628588145-2@ybl">
                                <button onclick="updatePaymentInfo()" class="mt-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Update UPI ID</button>
                                <p class="text-xs text-green-600 mt-1">‚úÖ Current UPI ID: <span id="current-upi-display">9628588145-2@ybl</span></p>
                            </div>
                            <div>
                                <label class="block font-semibold mb-2">QR Code Upload</label>
                                <input type="file" id="qr-code-file" accept="image/*" class="w-full p-2 border rounded mb-2">
                                <button onclick="uploadQRCode()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mr-2">Upload QR Code</button>
                                <button onclick="removeQRCode()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Remove QR</button>
                                <p class="text-xs text-gray-600 mt-1">Upload your payment QR code image (JPG, PNG, etc.)</p>
                                <div id="qr-preview" class="mt-2 hidden">
                                    <p class="text-sm font-medium text-green-600 mb-1">Current QR Code:</p>
                                    <img id="qr-preview-img" class="max-w-32 max-h-32 border rounded" alt="QR Code Preview">
                                </div>
                            </div>
                            <div>
                                <label class="block font-semibold mb-2">Alternative: QR Code URL</label>
                                <input type="url" id="edit-qr-url" class="w-full p-2 border rounded" placeholder="https://example.com/qr-code.jpg">
                                <button onclick="updateQRCodeFromURL()" class="mt-2 bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Use URL</button>
                                <p class="text-xs text-gray-600 mt-1">Or paste a direct image URL if you have one</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Course Management -->
            <div id="admin-courses" class="admin-section hidden">
                <h3 class="text-xl font-bold mb-4">Manage Courses</h3>
                <button onclick="showAddCourseForm()" class="bg-green-600 text-white px-4 py-2 rounded mb-4">Add New Course</button>
                <div id="course-management-list">
                    <!-- Course list will be populated -->
                </div>
                
                <!-- Add Course Form -->
                <div id="add-course-form" class="hidden mt-6 p-4 border rounded">
                    <h4 class="font-bold mb-4">Add New Course</h4>
                    <div class="grid gap-4">
                        <input type="text" id="new-course-name" placeholder="Course Name" class="p-2 border rounded">
                        <textarea id="new-course-desc" placeholder="Course Description" class="p-2 border rounded h-20"></textarea>
                        <input type="number" id="new-course-price" placeholder="Price" class="p-2 border rounded">
                        <input type="text" id="new-course-duration" placeholder="Duration" class="p-2 border rounded">
                        <input type="text" id="new-course-level" placeholder="Level" class="p-2 border rounded">
                        <div class="flex gap-2">
                            <button onclick="addNewCourse()" class="bg-green-600 text-white px-4 py-2 rounded">Add Course</button>
                            <button onclick="hideAddCourseForm()" class="bg-gray-600 text-white px-4 py-2 rounded">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Test Management -->
            <div id="admin-tests" class="admin-section hidden">
                <h3 class="text-xl font-bold mb-4">Manage Entrance Tests</h3>
                <button onclick="showAddTestForm()" class="bg-purple-600 text-white px-4 py-2 rounded mb-4">Add New Test</button>
                <div id="test-management-list">
                    <!-- Test list will be populated -->
                </div>
                
                <!-- Add Test Form -->
                <div id="add-test-form" class="hidden mt-6 p-4 border rounded">
                    <h4 class="font-bold mb-4">Create Entrance Test Question</h4>
                    <div class="grid gap-4">
                        <select id="new-test-course" class="p-2 border rounded">
                            <option value="">Select Course</option>
                            <option value="C/C++ Programming">C/C++ Programming</option>
                            <option value="Java Development">Java Development</option>
                            <option value="Web Development (HTML/CSS/JS)">Web Development (HTML/CSS/JS)</option>
                            <option value="Python Programming">Python Programming</option>
                            <option value="Data Structures & Algorithms">Data Structures & Algorithms</option>
                            <option value="Database Management (SQL)">Database Management (SQL)</option>
                        </select>
                        <textarea id="new-test-question" placeholder="Enter your question here..." class="p-2 border rounded h-20"></textarea>
                        <input type="text" id="new-test-option1" placeholder="Option A" class="p-2 border rounded">
                        <input type="text" id="new-test-option2" placeholder="Option B" class="p-2 border rounded">
                        <input type="text" id="new-test-option3" placeholder="Option C" class="p-2 border rounded">
                        <input type="text" id="new-test-option4" placeholder="Option D" class="p-2 border rounded">
                        <select id="new-test-correct" class="p-2 border rounded">
                            <option value="">Select Correct Answer</option>
                            <option value="1">Option A</option>
                            <option value="2">Option B</option>
                            <option value="3">Option C</option>
                            <option value="4">Option D</option>
                        </select>
                        <textarea id="new-test-explanation" placeholder="Explanation for the correct answer (optional)" class="p-2 border rounded h-16"></textarea>
                        <div class="flex gap-2">
                            <button onclick="addNewTest()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Add Question</button>
                            <button onclick="hideAddTestForm()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student Management -->
            <div id="admin-students" class="admin-section hidden">
                <h3 class="text-xl font-bold mb-4">Student Management</h3>
                <div class="mb-4 flex gap-4">
                    <button onclick="filterStudents('all')" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700" id="filter-all">All Students</button>
                    <button onclick="filterStudents('paid')" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700" id="filter-paid">Paid Students</button>
                    <button onclick="filterStudents('pending')" class="bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700" id="filter-pending">Pending Payment</button>
                    <button onclick="filterStudents('banned')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700" id="filter-banned">Banned Students</button>
                </div>
                <div id="student-list">
                    <!-- Student list will be populated -->
                </div>
            </div>

            <!-- Video Lectures Management -->
            <div id="admin-lectures" class="admin-section hidden">
                <h3 class="text-xl font-bold mb-4">Video Lectures Management</h3>
                <button onclick="showAddLectureForm()" class="bg-indigo-600 text-white px-4 py-2 rounded mb-4">Add New Lecture</button>
                <div id="lecture-management-list">
                    <!-- Lecture list will be populated -->
                </div>
                
                <!-- Add Lecture Form -->
                <div id="add-lecture-form" class="hidden mt-6 p-4 border rounded">
                    <h4 class="font-bold mb-4">Add New Video Lecture</h4>
                    <div class="grid gap-4">
                        <select id="new-lecture-course" class="p-2 border rounded">
                            <option value="">Select Course</option>
                            <option value="C/C++ Programming">C/C++ Programming</option>
                            <option value="Java Development">Java Development</option>
                            <option value="Web Development (HTML/CSS/JS)">Web Development (HTML/CSS/JS)</option>
                            <option value="Python Programming">Python Programming</option>
                            <option value="Data Structures & Algorithms">Data Structures & Algorithms</option>
                            <option value="Database Management (SQL)">Database Management (SQL)</option>
                        </select>
                        <input type="text" id="new-lecture-title" placeholder="Lecture Title" class="p-2 border rounded">
                        <textarea id="new-lecture-description" placeholder="Lecture Description" class="p-2 border rounded h-20"></textarea>
                        <input type="url" id="new-lecture-video" placeholder="Video URL (YouTube, Vimeo, etc.)" class="p-2 border rounded">
                        <input type="number" id="new-lecture-duration" placeholder="Duration in minutes" class="p-2 border rounded">
                        <div class="flex gap-2">
                            <button onclick="addNewLecture()" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Add Lecture</button>
                            <button onclick="hideAddLectureForm()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Course Details Modal -->
    <div id="course-details-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-3xl w-full mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-2xl font-bold mb-6 text-center">Course Details</h3>
            <div id="course-details-content">
                <!-- Course details will be populated -->
            </div>
        </div>
    </div>

    <!-- Test Modal -->
    <div id="test-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-2xl font-bold mb-6 text-center">Entrance Test</h3>
            <div id="test-content">
                <!-- Test content will be populated -->
            </div>
        </div>
    </div>

    <!-- Sample Test Modal -->
    <div id="sample-test-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-2xl font-bold mb-6 text-center">Sample Programming Test</h3>
            <div id="sample-test-content">
                <!-- Sample test content will be populated -->
            </div>
        </div>
    </div>

    <!-- Code Editor Modal -->
    <div id="code-editor-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 max-w-7xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">üíª BittCode Online Compiler</h3>
                <button onclick="closeModal('code-editor-modal')" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div id="code-editor-content">
                <!-- Code editor content will be populated -->
            </div>
        </div>
    </div>

    <!-- Video Lectures Modal -->
    <div id="video-lectures-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">üé• Video Lectures</h3>
                <button onclick="closeModal('video-lectures-modal')" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div id="video-lectures-content">
                <!-- Video lectures content will be populated -->
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentUser = null;
        let isAdmin = false;

        // Utility function to copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                alert('UPI ID copied to clipboard!');
            }).catch(function() {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('UPI ID copied to clipboard!');
            });
        }
        let courses = [
            {
                id: 1,
                name: "C/C++ Programming",
                description: "Master the fundamentals of C and C++ programming languages with hands-on projects",
                price: 24999,
                duration: "8 weeks",
                level: "Beginner to Advanced",
                icon: "‚ö°",
                registrationFee: 4999,
                courseFee: 18000,
                otherFees: 2000,
                details: {
                    modules: ["Basic C Syntax", "Pointers & Memory Management", "Object-Oriented Programming in C++", "STL & Data Structures", "File Handling", "Project Development"],
                    prerequisites: "Basic computer knowledge",
                    certification: "Industry-recognized certificate",
                    instructor: "Prof. Rajesh Kumar (10+ years experience)",
                    classSize: "Max 25 students per batch"
                }
            },
            {
                id: 2,
                name: "Java Development",
                description: "Complete Java programming from basics to enterprise applications with Spring Framework",
                price: 32999,
                duration: "10 weeks",
                level: "Beginner to Advanced",
                icon: "‚òï",
                registrationFee: 4999,
                courseFee: 25000,
                otherFees: 3000,
                details: {
                    modules: ["Java Fundamentals", "OOP Concepts", "Collections Framework", "Multithreading", "JDBC & Database", "Spring Boot", "REST APIs", "Project Work"],
                    prerequisites: "Basic programming knowledge helpful",
                    certification: "Oracle Java certification preparation",
                    instructor: "Ms. Priya Sharma (8+ years industry experience)",
                    classSize: "Max 20 students per batch"
                }
            },
            {
                id: 3,
                name: "Web Development (HTML/CSS/JS)",
                description: "Build modern responsive websites with HTML5, CSS3, JavaScript and popular frameworks",
                price: 28999,
                duration: "12 weeks",
                level: "Beginner to Intermediate",
                icon: "üåê",
                registrationFee: 4999,
                courseFee: 22000,
                otherFees: 2000,
                details: {
                    modules: ["HTML5 & Semantic Web", "CSS3 & Flexbox/Grid", "JavaScript ES6+", "DOM Manipulation", "React.js Basics", "Responsive Design", "Portfolio Projects"],
                    prerequisites: "No prior experience required",
                    certification: "Web Development Certificate",
                    instructor: "Mr. Amit Patel (Frontend Developer at TCS)",
                    classSize: "Max 30 students per batch"
                }
            },
            {
                id: 4,
                name: "Python Programming",
                description: "Learn Python for web development, data science, automation and machine learning basics",
                price: 27999,
                duration: "9 weeks",
                level: "Beginner to Advanced",
                icon: "üêç",
                registrationFee: 4999,
                courseFee: 21000,
                otherFees: 2000,
                details: {
                    modules: ["Python Basics", "Data Structures", "File Handling", "Web Scraping", "Django Framework", "Data Analysis with Pandas", "API Development", "ML Introduction"],
                    prerequisites: "Basic computer skills",
                    certification: "Python Institute certification prep",
                    instructor: "Dr. Sneha Gupta (Data Scientist, 12+ years)",
                    classSize: "Max 25 students per batch"
                }
            },
            {
                id: 5,
                name: "Data Structures & Algorithms",
                description: "Master DSA concepts essential for technical interviews at top tech companies",
                price: 36999,
                duration: "14 weeks",
                level: "Intermediate to Advanced",
                icon: "üßÆ",
                registrationFee: 4999,
                courseFee: 30000,
                otherFees: 2000,
                details: {
                    modules: ["Arrays & Strings", "Linked Lists", "Stacks & Queues", "Trees & Graphs", "Dynamic Programming", "Sorting & Searching", "System Design Basics", "Interview Preparation"],
                    prerequisites: "Knowledge of any programming language",
                    certification: "DSA Mastery Certificate",
                    instructor: "Mr. Vikash Singh (Ex-Google, 15+ years)",
                    classSize: "Max 15 students per batch"
                }
            },
            {
                id: 6,
                name: "Database Management (SQL)",
                description: "Learn database design, SQL optimization, and work with MySQL, PostgreSQL, MongoDB",
                price: 23999,
                duration: "6 weeks",
                level: "Beginner to Intermediate",
                icon: "üóÑÔ∏è",
                registrationFee: 4999,
                courseFee: 17000,
                otherFees: 2000,
                details: {
                    modules: ["Database Fundamentals", "SQL Queries", "Joins & Subqueries", "Stored Procedures", "Database Design", "NoSQL Basics", "Performance Optimization"],
                    prerequisites: "Basic computer knowledge",
                    certification: "Database Administrator Certificate",
                    instructor: "Ms. Kavita Joshi (DBA, 10+ years)",
                    classSize: "Max 20 students per batch"
                }
            }
        ];

        let students = [];
        let videoLectures = {};
        let codeTemplates = {
            'c': `#include <stdio.h>

int main() {
    printf("Hello, World!\\n");
    return 0;
}`,
            'cpp': `#include <iostream>
using namespace std;

int main() {
    cout << "Hello, World!" << endl;
    return 0;
}`,
            'java': `public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,
            'python': `print("Hello, World!")`,
            'javascript': `console.log("Hello, World!");`,
            'html': `<!DOCTYPE html>
<html>
<head>
    <title>My Page</title>
</head>
<body>
    <h1>Hello, World!</h1>
</body>
</html>`
        };
        let tests = {
            "C/C++ Programming": [
                {
                    question: "What is the correct syntax to declare a variable in C++?",
                    options: ["int x;", "variable int x;", "declare int x;", "x int;"],
                    correct: 1,
                    explanation: "In C++, variables are declared with the data type followed by the variable name."
                },
                {
                    question: "Which operator is used to access the value at the address stored in a pointer?",
                    options: ["&", "*", "->", "::"],
                    correct: 2,
                    explanation: "The * operator is the dereference operator used to access the value at the address stored in a pointer."
                },
                {
                    question: "What is the size of int data type in C++ (typically)?",
                    options: ["2 bytes", "4 bytes", "8 bytes", "1 byte"],
                    correct: 2,
                    explanation: "On most modern systems, int is typically 4 bytes (32 bits)."
                }
            ],
            "Java Development": [
                {
                    question: "Which keyword is used to create a class in Java?",
                    options: ["class", "Class", "create", "new"],
                    correct: 1,
                    explanation: "The 'class' keyword is used to define a class in Java."
                },
                {
                    question: "What is the main method signature in Java?",
                    options: ["public static void main(String args[])", "public void main(String args[])", "static void main(String args[])", "public main(String args[])"],
                    correct: 1,
                    explanation: "The main method must be public, static, void, and take String array as parameter."
                },
                {
                    question: "Which of these is NOT a Java primitive data type?",
                    options: ["int", "String", "boolean", "char"],
                    correct: 2,
                    explanation: "String is a class in Java, not a primitive data type."
                }
            ],
            "Web Development (HTML/CSS/JS)": [
                {
                    question: "Which HTML tag is used to create a hyperlink?",
                    options: ["<link>", "<a>", "<href>", "<url>"],
                    correct: 2,
                    explanation: "The <a> tag with href attribute is used to create hyperlinks."
                },
                {
                    question: "Which CSS property is used to change the text color?",
                    options: ["text-color", "color", "font-color", "text-style"],
                    correct: 2,
                    explanation: "The 'color' property is used to set the text color in CSS."
                }
            ],
            "Python Programming": [
                {
                    question: "Which of the following is the correct way to create a list in Python?",
                    options: ["list = []", "list = ()", "list = {}", "list = <>"],
                    correct: 1,
                    explanation: "Square brackets [] are used to create lists in Python."
                },
                {
                    question: "What is the output of print(type([]))?",
                    options: ["<class 'array'>", "<class 'list'>", "<class 'tuple'>", "<class 'dict'>"],
                    correct: 2,
                    explanation: "[] creates a list object, so type([]) returns <class 'list'>."
                }
            ],
            "Data Structures & Algorithms": [
                {
                    question: "What is the time complexity of binary search?",
                    options: ["O(n)", "O(log n)", "O(n¬≤)", "O(1)"],
                    correct: 2,
                    explanation: "Binary search has O(log n) time complexity as it divides the search space in half each time."
                },
                {
                    question: "Which data structure follows LIFO principle?",
                    options: ["Queue", "Stack", "Array", "Linked List"],
                    correct: 2,
                    explanation: "Stack follows Last In First Out (LIFO) principle."
                }
            ],
            "Database Management (SQL)": [
                {
                    question: "Which SQL command is used to retrieve data from a database?",
                    options: ["GET", "SELECT", "RETRIEVE", "FETCH"],
                    correct: 2,
                    explanation: "SELECT is the SQL command used to retrieve data from database tables."
                },
                {
                    question: "What does SQL stand for?",
                    options: ["Structured Query Language", "Simple Query Language", "Standard Query Language", "System Query Language"],
                    correct: 1,
                    explanation: "SQL stands for Structured Query Language."
                }
            ]
        };

        let sampleTests = [
            {
                question: "What is the primary purpose of a compiler?",
                options: ["To execute code", "To translate source code to machine code", "To debug programs", "To format code"],
                correct: 2,
                explanation: "A compiler translates high-level source code into machine code or bytecode."
            },
            {
                question: "Which of the following is NOT a programming paradigm?",
                options: ["Object-Oriented", "Functional", "Procedural", "Debugging"],
                correct: 4,
                explanation: "Debugging is a process, not a programming paradigm."
            },
            {
                question: "What does 'IDE' stand for in programming?",
                options: ["Integrated Development Environment", "Interactive Design Environment", "Internal Development Engine", "Intelligent Debug Environment"],
                correct: 1,
                explanation: "IDE stands for Integrated Development Environment - a software application providing comprehensive facilities for software development."
            },
            {
                question: "Which data type would be most appropriate for storing a person's age?",
                options: ["String", "Boolean", "Integer", "Float"],
                correct: 3,
                explanation: "Integer is most appropriate for age as it's a whole number."
            },
            {
                question: "What is the result of 5 % 3 in most programming languages?",
                options: ["1", "2", "1.67", "0"],
                correct: 2,
                explanation: "The modulo operator (%) returns the remainder of division. 5 divided by 3 is 1 remainder 2."
            }
        ];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderCourses();
            loadStoredData();
            loadAdminSettings();
        });

        function loadStoredData() {
            const storedStudents = localStorage.getItem('codemaster_students');
            if (storedStudents) {
                students = JSON.parse(storedStudents);
            }
            
            const storedCourses = localStorage.getItem('codemaster_courses');
            if (storedCourses) {
                courses = JSON.parse(storedCourses);
                renderCourses();
            }
            
            const storedTests = localStorage.getItem('codemaster_tests');
            if (storedTests) {
                tests = JSON.parse(storedTests);
            }
            
            const storedLectures = localStorage.getItem('codemaster_lectures');
            if (storedLectures) {
                videoLectures = JSON.parse(storedLectures);
            }
        }

        function saveData() {
            localStorage.setItem('codemaster_students', JSON.stringify(students));
            localStorage.setItem('codemaster_courses', JSON.stringify(courses));
            localStorage.setItem('codemaster_tests', JSON.stringify(tests));
            localStorage.setItem('codemaster_lectures', JSON.stringify(videoLectures));
        }

        function renderCourses() {
            const coursesGrid = document.getElementById('courses-grid');
            coursesGrid.innerHTML = courses.map(course => `
                <div class="bg-white rounded-lg shadow-lg p-6 card-hover ${isAdmin ? 'admin-edit' : ''}">
                    <div class="text-4xl mb-4 text-center">${course.icon}</div>
                    <h4 class="text-xl font-bold mb-3 text-gray-800">${course.name}</h4>
                    <p class="text-gray-600 mb-4">${course.description}</p>
                    <div class="space-y-2 mb-4">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Duration:</span>
                            <span class="text-sm font-semibold">${course.duration}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Level:</span>
                            <span class="text-sm font-semibold">${course.level}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Total Price:</span>
                            <span class="text-lg font-bold text-green-600">‚Çπ${course.price.toLocaleString('en-IN')}</span>
                        </div>
                    </div>
                    <div class="flex gap-2 mb-3">
                        <button onclick="showCourseDetails(${course.id})" class="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition text-sm">View Details</button>
                        <button onclick="enrollInCourse(${course.id})" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition text-sm font-semibold">Enroll Now</button>
                    </div>
                    ${isAdmin ? `
                        <div class="mt-2 flex gap-2">
                            <button onclick="editCourse(${course.id})" class="flex-1 bg-yellow-600 text-white py-1 px-2 rounded text-sm">Edit</button>
                            <button onclick="deleteCourse(${course.id})" class="flex-1 bg-red-600 text-white py-1 px-2 rounded text-sm">Delete</button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function showLogin() {
            document.getElementById('login-modal').classList.remove('hidden');
        }

        function showRegister() {
            document.getElementById('register-modal').classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function scrollToCourses() {
            document.getElementById('courses').scrollIntoView({ behavior: 'smooth' });
        }

        // Login functionality
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('login-id').value;
            const password = document.getElementById('login-password').value;

            // Check registered users (both students and admins)
            const user = students.find(s => s.email === email && s.password === password);
            if (user) {
                // Check if student is banned
                if (user.status === 'banned') {
                    alert(`Your account has been banned. Reason: ${user.banReason || 'Violation of terms'}. Please contact admin for more information.`);
                    return;
                }
                
                currentUser = user;
                if (user.type === 'admin') {
                    isAdmin = true;
                    showAdminInterface();
                } else {
                    isAdmin = false;
                    showUserInterface();
                }
                closeModal('login-modal');
            } else {
                alert('Invalid email or password. Please check your credentials or register first.');
            }
        });

        // Registration functionality
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            const phone = document.getElementById('reg-phone').value;
            const accountType = document.getElementById('reg-type').value;

            // Check if email already exists
            if (students.find(s => s.email === email)) {
                alert('Email already registered. Please use a different email.');
                return;
            }

            // Validate admin registration
            if (accountType === 'admin' && email !== 'nikhkr9628@gmail.com') {
                alert('Admin registration is restricted. Only authorized email addresses can register as admin.');
                return;
            }

            const newUser = {
                id: (accountType === 'admin' ? 'ADM' : 'STU') + Date.now(),
                name: name,
                email: email,
                password: password,
                phone: phone,
                type: accountType,
                enrolledCourses: [],
                registrationDate: new Date().toISOString()
            };

            students.push(newUser);
            saveData();
            
            alert(`Registration successful! You can now login with your credentials as ${accountType}.`);
            closeModal('register-modal');
        });

        function showUserInterface() {
            document.querySelector('nav .flex.items-center.space-x-4').innerHTML = `
                <div id="user-menu">
                    <span id="welcome-text" class="text-gray-700 mr-4">Welcome, ${currentUser.name}!</span>
                    <button onclick="showVideoLectures()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition mr-2">üé• Lectures</button>
                    <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Logout</button>
                </div>
            `;
        }

        function showAdminInterface() {
            document.querySelector('nav .flex.items-center.space-x-4').innerHTML = `
                <div id="user-menu">
                    <span id="welcome-text" class="text-gray-700 mr-4">Admin: ${currentUser.name}</span>
                    <button onclick="showAdminPanel()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition mr-2">Admin Panel</button>
                    <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Logout</button>
                </div>
            `;
            renderCourses(); // Re-render with admin controls
        }

        function logout() {
            currentUser = null;
            isAdmin = false;
            document.querySelector('nav .flex.items-center.space-x-4').innerHTML = `
                <button onclick="showLogin()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">Login</button>
                <button onclick="showRegister()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Register</button>
            `;
            renderCourses(); // Re-render without admin controls
        }

        function enrollInCourse(courseId) {
            if (!currentUser) {
                alert('Please login first to enroll in courses.');
                showLogin();
                return;
            }

            if (currentUser.type === 'admin') {
                alert('Admins cannot enroll in courses.');
                return;
            }

            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            // Check if entrance test exists
            if (tests[course.name] && tests[course.name].length > 0) {
                showEntranceTest(course);
            } else {
                showEnrollmentForm(course);
            }
        }

        function showEntranceTest(course) {
            const testQuestions = tests[course.name];
            if (!testQuestions || testQuestions.length === 0) {
                showEnrollmentForm(course);
                return;
            }

            const testContent = document.getElementById('test-content');
            testContent.innerHTML = `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold mb-2">Entrance Test for ${course.name}</h4>
                    <p class="text-gray-600">Please answer the following questions to proceed with enrollment:</p>
                </div>
                <form id="entrance-test-form">
                    ${testQuestions.map((q, index) => `
                        <div class="mb-6 p-4 border rounded">
                            <h5 class="font-semibold mb-3">${index + 1}. ${q.question}</h5>
                            ${q.options.map((option, optIndex) => `
                                <label class="block mb-2">
                                    <input type="radio" name="question_${index}" value="${optIndex + 1}" class="mr-2">
                                    ${option}
                                </label>
                            `).join('')}
                        </div>
                    `).join('')}
                    <div class="flex gap-4">
                        <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">Submit Test</button>
                        <button type="button" onclick="closeModal('test-modal')" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700">Cancel</button>
                    </div>
                </form>
            `;

            document.getElementById('entrance-test-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                let score = 0;
                
                testQuestions.forEach((q, index) => {
                    const answer = formData.get(`question_${index}`);
                    if (parseInt(answer) === q.correct) {
                        score++;
                    }
                });

                const percentage = (score / testQuestions.length) * 100;
                if (percentage >= 60) {
                    alert(`Congratulations! You passed the test with ${percentage.toFixed(1)}%. You can now proceed with enrollment.`);
                    closeModal('test-modal');
                    showEnrollmentForm(course);
                } else {
                    alert(`Sorry, you scored ${percentage.toFixed(1)}%. You need at least 60% to enroll. Please study more and try again.`);
                    closeModal('test-modal');
                }
            });

            document.getElementById('test-modal').classList.remove('hidden');
        }

        function showEnrollmentForm(course) {
            const enrollmentContent = document.getElementById('enrollment-content');
            enrollmentContent.innerHTML = `
                <div class="mb-6">
                    <h4 class="text-2xl font-bold mb-2">${course.name}</h4>
                    <p class="text-gray-600">${course.description}</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg mb-6">
                    <h5 class="font-semibold mb-3">Fee Breakdown:</h5>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>Registration Fee:</span>
                            <span class="font-semibold">‚Çπ${course.registrationFee.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Course Fee:</span>
                            <span class="font-semibold">‚Çπ${course.courseFee.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Other Fees (Materials, Certificate):</span>
                            <span class="font-semibold">‚Çπ${course.otherFees.toLocaleString('en-IN')}</span>
                        </div>
                        <hr class="my-2">
                        <div class="flex justify-between text-lg font-bold">
                            <span>Total Amount:</span>
                            <span class="text-green-600">‚Çπ${course.price.toLocaleString('en-IN')}</span>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6">
                    <h5 class="font-semibold mb-3 text-blue-800">üí≥ Payment Options</h5>
                    <div class="space-y-3">
                        <div class="bg-white p-3 rounded border">
                            <div class="flex items-center mb-2">
                                <span class="text-2xl mr-2">üì±</span>
                                <span class="font-semibold">UPI Payment (Recommended)</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Pay directly to our UPI ID:</p>
                            <div class="bg-gray-100 p-2 rounded font-mono text-sm mb-3">
                                <strong id="display-upi-id">9628588145-2@ybl</strong>
                                <button onclick="copyToClipboard(document.getElementById('display-upi-id').textContent)" class="ml-2 text-blue-600 hover:text-blue-800">üìã Copy</button>
                            </div>
                            <div class="text-center">
                                <div id="qr-code-section" class="bg-gray-100 border-2 border-dashed border-gray-300 p-4 rounded-lg">
                                    <p class="text-gray-500 text-sm">QR Code will be displayed here</p>
                                    <p class="text-xs text-gray-400 mt-1">(Admin can upload QR code)</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-3 rounded border">
                            <div class="flex items-center mb-2">
                                <span class="text-2xl mr-2">üì±</span>
                                <span class="font-semibold">Digital Wallet Payments</span>
                            </div>
                            <div class="grid grid-cols-2 gap-3">
                                <button onclick="openPhonePe('${course.price}')" class="bg-purple-600 text-white p-2 rounded text-sm font-medium hover:bg-purple-700">
                                    üì± Pay with PhonePe
                                </button>
                                <button onclick="openGooglePay('${course.price}')" class="bg-blue-600 text-white p-2 rounded text-sm font-medium hover:bg-blue-700">
                                    üí≥ Pay with Google Pay
                                </button>
                            </div>
                            <p class="text-xs text-gray-600 mt-2">Click buttons above to open apps directly</p>
                        </div>
                    </div>
                </div>

                <form id="payment-form">
                    <h5 class="font-semibold mb-3">Payment Confirmation:</h5>
                    <div class="grid gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-1">Payment Method</label>
                            <select id="payment-method" class="w-full p-2 border rounded" required>
                                <option value="">Select Payment Method</option>
                                <option value="upi">UPI Payment</option>
                                <option value="phonepe">PhonePe</option>
                                <option value="googlepay">Google Pay</option>
                                <option value="other">Other Digital Wallet</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Transaction ID / Reference Number</label>
                            <input type="text" id="transaction-id" class="w-full p-2 border rounded" placeholder="Enter transaction ID after payment" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Your Name</label>
                            <input type="text" id="payer-name" class="w-full p-2 border rounded" value="${currentUser.name}" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Your Phone Number</label>
                            <input type="tel" id="payer-phone" class="w-full p-2 border rounded" value="${currentUser.phone}" required>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 p-4 rounded mb-4">
                        <p class="text-sm text-green-800">
                            <strong>Payment Instructions:</strong><br>
                            1. Make payment using any of the above methods<br>
                            2. Note down the transaction ID/reference number<br>
                            3. Enter the transaction details below and submit<br>
                            4. Your enrollment will be confirmed within 24 hours
                        </p>
                    </div>

                    <div class="flex gap-4">
                        <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 font-semibold">
                            Confirm Payment & Enroll
                        </button>
                        <button type="button" onclick="closeModal('enrollment-modal')" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                            Cancel
                        </button>
                    </div>
                </form>
            `;

            document.getElementById('payment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const paymentMethod = document.getElementById('payment-method').value;
                const transactionId = document.getElementById('transaction-id').value;
                const payerName = document.getElementById('payer-name').value;
                const payerPhone = document.getElementById('payer-phone').value;
                
                if (!paymentMethod || !transactionId || !payerName || !payerPhone) {
                    alert('Please fill all payment details');
                    return;
                }
                
                // Simulate payment processing
                const button = e.target.querySelector('button[type="submit"]');
                button.textContent = 'Processing...';
                button.disabled = true;
                
                setTimeout(() => {
                    // Add course to student's enrolled courses with payment details
                    if (!currentUser.enrolledCourses) {
                        currentUser.enrolledCourses = [];
                    }
                    
                    currentUser.enrolledCourses.push({
                        courseId: course.id,
                        courseName: course.name,
                        enrollmentDate: new Date().toISOString(),
                        paymentAmount: course.price,
                        paymentMethod: paymentMethod,
                        transactionId: transactionId,
                        paymentStatus: 'Pending Verification'
                    });
                    
                    // Update student in the students array
                    const studentIndex = students.findIndex(s => s.id === currentUser.id);
                    if (studentIndex !== -1) {
                        students[studentIndex] = currentUser;
                        saveData();
                    }
                    
                    alert(`Thank you! Your enrollment request for ${course.name} has been submitted.\n\nPayment Details:\n- Method: ${paymentMethod.toUpperCase()}\n- Transaction ID: ${transactionId}\n- Amount: ‚Çπ${course.price.toLocaleString('en-IN')}\n\nYour enrollment will be confirmed within 24 hours after payment verification.`);
                    closeModal('enrollment-modal');
                }, 2000);
            });

            document.getElementById('enrollment-modal').classList.remove('hidden');
        }

        // Admin Panel Functions
        function showAdminPanel() {
            document.getElementById('admin-panel').classList.remove('hidden');
            showAdminSection('content');
        }

        function closeAdminPanel() {
            document.getElementById('admin-panel').classList.add('hidden');
        }

        function showAdminSection(section) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(s => s.classList.add('hidden'));
            
            // Show selected section
            document.getElementById(`admin-${section}`).classList.remove('hidden');
            
            if (section === 'courses') {
                populateCourseManagement();
            } else if (section === 'tests') {
                populateTestManagement();
            } else if (section === 'students') {
                populateStudentList();
            } else if (section === 'lectures') {
                populateLectureManagement();
            }
        }

        function updateContent(elementId, inputId) {
            const newValue = document.getElementById(inputId).value;
            document.getElementById(elementId).textContent = newValue;
            alert('Content updated successfully!');
        }

        function updatePaymentInfo() {
            const newUpiId = document.getElementById('edit-upi-id').value.trim();
            if (!newUpiId) {
                alert('Please enter a valid UPI ID');
                return;
            }
            
            // Update all instances of UPI ID on the page
            const displayElements = document.querySelectorAll('#display-upi-id');
            displayElements.forEach(element => {
                element.textContent = newUpiId;
            });
            
            // Update current display
            const currentDisplay = document.getElementById('current-upi-display');
            if (currentDisplay) {
                currentDisplay.textContent = newUpiId;
            }
            
            localStorage.setItem('admin_upi_id', newUpiId);
            alert('‚úÖ UPI ID updated successfully! It will appear in all enrollment forms.');
        }

        function uploadQRCode() {
            const fileInput = document.getElementById('qr-code-file');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Please select a QR code image file first');
                return;
            }
            
            if (!file.type.startsWith('image/')) {
                alert('Please select a valid image file');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Data = e.target.result;
                
                // Update QR code sections
                updateQRCodeDisplay(base64Data);
                
                // Save to localStorage
                localStorage.setItem('admin_qr_code', base64Data);
                
                // Show preview
                const preview = document.getElementById('qr-preview');
                const previewImg = document.getElementById('qr-preview-img');
                preview.classList.remove('hidden');
                previewImg.src = base64Data;
                
                alert('‚úÖ QR Code uploaded successfully!');
            };
            
            reader.readAsDataURL(file);
        }

        function updateQRCodeFromURL() {
            const qrCodeUrl = document.getElementById('edit-qr-url').value.trim();
            if (!qrCodeUrl) {
                alert('Please enter a valid QR code image URL');
                return;
            }
            
            // Test if URL is accessible
            const testImg = new Image();
            testImg.onload = function() {
                updateQRCodeDisplay(qrCodeUrl);
                localStorage.setItem('admin_qr_code', qrCodeUrl);
                
                // Show preview
                const preview = document.getElementById('qr-preview');
                const previewImg = document.getElementById('qr-preview-img');
                preview.classList.remove('hidden');
                previewImg.src = qrCodeUrl;
                
                alert('‚úÖ QR Code updated successfully!');
            };
            testImg.onerror = function() {
                alert('‚ùå Failed to load image from URL. Please check the URL and try again.');
            };
            testImg.src = qrCodeUrl;
        }

        function updateQRCodeDisplay(imageSrc) {
            const qrSections = document.querySelectorAll('#qr-code-section');
            qrSections.forEach(section => {
                section.innerHTML = `
                    <img src="${imageSrc}" alt="Payment QR Code" class="max-w-48 max-h-48 mx-auto rounded-lg border shadow-md" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <p class="text-red-500 text-sm mt-2 hidden">Failed to load QR code image</p>
                    <p class="text-xs text-gray-600 mt-2">Scan with any UPI app to pay</p>
                `;
            });
        }

        function removeQRCode() {
            if (confirm('Are you sure you want to remove the QR code?')) {
                localStorage.removeItem('admin_qr_code');
                
                // Reset QR sections
                const qrSections = document.querySelectorAll('#qr-code-section');
                qrSections.forEach(section => {
                    section.innerHTML = `
                        <div class="bg-gray-100 border-2 border-dashed border-gray-300 p-4 rounded-lg">
                            <p class="text-gray-500 text-sm">QR Code will be displayed here</p>
                            <p class="text-xs text-gray-400 mt-1">(Admin can upload QR code)</p>
                        </div>
                    `;
                });
                
                // Hide preview
                document.getElementById('qr-preview').classList.add('hidden');
                document.getElementById('qr-code-file').value = '';
                document.getElementById('edit-qr-url').value = '';
                
                alert('‚úÖ QR Code removed successfully!');
            }
        }

        function loadAdminSettings() {
            const savedUpiId = localStorage.getItem('admin_upi_id') || '9628588145-2@ybl';
            const savedQrCode = localStorage.getItem('admin_qr_code');
            
            // Update UPI ID fields
            const editUpiField = document.getElementById('edit-upi-id');
            if (editUpiField) {
                editUpiField.value = savedUpiId;
            }
            
            const displayElements = document.querySelectorAll('#display-upi-id');
            displayElements.forEach(element => {
                element.textContent = savedUpiId;
            });
            
            const currentDisplay = document.getElementById('current-upi-display');
            if (currentDisplay) {
                currentDisplay.textContent = savedUpiId;
            }
            
            // Update QR Code if exists
            if (savedQrCode) {
                updateQRCodeDisplay(savedQrCode);
                
                // Show preview in admin panel
                const preview = document.getElementById('qr-preview');
                const previewImg = document.getElementById('qr-preview-img');
                if (preview && previewImg) {
                    preview.classList.remove('hidden');
                    previewImg.src = savedQrCode;
                }
            }
        }

        function openPhonePe(amount) {
            const upiId = localStorage.getItem('admin_upi_id') || '9628588145-2@ybl';
            const merchantName = 'BittCode Academy';
            
            // PhonePe UPI URL format
            const phonepeUrl = `phonepe://pay?pa=${upiId}&pn=${encodeURIComponent(merchantName)}&am=${amount}&cu=INR&tn=${encodeURIComponent('BittCode Course Payment')}`;
            
            // Try to open PhonePe app
            window.location.href = phonepeUrl;
            
            // Fallback: Show UPI details if app doesn't open
            setTimeout(() => {
                alert(`If PhonePe didn't open automatically:\n\n1. Open PhonePe app manually\n2. Go to "Send Money" > "To Phone Number/UPI ID"\n3. Enter UPI ID: ${upiId}\n4. Amount: ‚Çπ${amount}\n5. Add note: BittCode Course Payment`);
            }, 2000);
        }

        function openGooglePay(amount) {
            const upiId = localStorage.getItem('admin_upi_id') || '9628588145-2@ybl';
            const merchantName = 'BittCode Academy';
            
            // Google Pay UPI URL format
            const gpayUrl = `tez://upi/pay?pa=${upiId}&pn=${encodeURIComponent(merchantName)}&am=${amount}&cu=INR&tn=${encodeURIComponent('BittCode Course Payment')}`;
            
            // Try to open Google Pay app
            window.location.href = gpayUrl;
            
            // Fallback: Show UPI details if app doesn't open
            setTimeout(() => {
                alert(`If Google Pay didn't open automatically:\n\n1. Open Google Pay app manually\n2. Tap "New Payment" > "Pay by UPI ID"\n3. Enter UPI ID: ${upiId}\n4. Amount: ‚Çπ${amount}\n5. Add note: BittCode Course Payment`);
            }, 2000);
        }

        function populateCourseManagement() {
            const courseList = document.getElementById('course-management-list');
            courseList.innerHTML = courses.map(course => `
                <div class="border p-4 rounded mb-4">
                    <h4 class="font-bold">${course.name}</h4>
                    <p class="text-gray-600">${course.description}</p>
                    <p class="font-semibold">Price: ‚Çπ${course.price.toLocaleString('en-IN')}</p>
                    <div class="mt-2 flex gap-2">
                        <button onclick="editCourse(${course.id})" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">Edit</button>
                        <button onclick="deleteCourse(${course.id})" class="bg-red-600 text-white px-3 py-1 rounded text-sm">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function populateTestManagement() {
            const testList = document.getElementById('test-management-list');
            let html = '';
            
            Object.keys(tests).forEach(courseName => {
                html += `<div class="border p-4 rounded mb-4">
                    <h4 class="font-bold">${courseName}</h4>
                    <p class="text-gray-600">${tests[courseName].length} questions</p>
                    <div class="mt-2">
                        ${tests[courseName].map((test, index) => `
                            <div class="bg-gray-50 p-2 rounded mb-2">
                                <p class="text-sm"><strong>Q${index + 1}:</strong> ${test.question}</p>
                                <p class="text-xs text-gray-600">Correct: ${test.options[test.correct - 1]}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
            });
            
            testList.innerHTML = html || '<p class="text-gray-500">No tests created yet.</p>';
        }

        function populateStudentList(filter = 'all') {
            let filteredStudents = students.filter(student => student.type !== 'admin');
            
            if (filter === 'paid') {
                filteredStudents = filteredStudents.filter(student => 
                    student.enrolledCourses && student.enrolledCourses.some(course => 
                        course.paymentStatus === 'Confirmed' || course.paymentStatus === 'Approved'
                    )
                );
            } else if (filter === 'pending') {
                filteredStudents = filteredStudents.filter(student => 
                    student.enrolledCourses && student.enrolledCourses.some(course => 
                        course.paymentStatus === 'Pending Verification'
                    )
                );
            } else if (filter === 'banned') {
                filteredStudents = filteredStudents.filter(student => student.status === 'banned');
            }

            const studentList = document.getElementById('student-list');
            studentList.innerHTML = filteredStudents.map(student => `
                <div class="border p-4 rounded mb-4 ${student.status === 'banned' ? 'bg-red-50 border-red-200' : 'bg-white'}">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-bold flex items-center">
                                ${student.name}
                                ${student.status === 'banned' ? '<span class="ml-2 bg-red-600 text-white px-2 py-1 rounded text-xs">BANNED</span>' : ''}
                            </h4>
                            <p class="text-gray-600">Email: ${student.email}</p>
                            <p class="text-gray-600">Phone: ${student.phone}</p>
                            <p class="text-gray-600">Student ID: ${student.id}</p>
                            <p class="text-gray-600">Registered: ${new Date(student.registrationDate).toLocaleDateString()}</p>
                        </div>
                        <div class="flex gap-2">
                            ${student.status === 'banned' ? 
                                `<button onclick="unbanStudent('${student.id}')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">Unban</button>` :
                                `<button onclick="banStudent('${student.id}')" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">Ban</button>`
                            }
                        </div>
                    </div>
                    
                    ${student.enrolledCourses && student.enrolledCourses.length > 0 ? `
                        <div class="mt-4">
                            <p class="font-semibold mb-2">Enrolled Courses:</p>
                            ${student.enrolledCourses.map(course => `
                                <div class="text-sm bg-gray-50 p-3 rounded mb-2 border">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <p class="text-blue-600 font-medium">‚Ä¢ ${course.courseName}</p>
                                            <p class="text-gray-600">Amount: ‚Çπ${course.paymentAmount.toLocaleString('en-IN')}</p>
                                            <p class="text-gray-600">Method: ${course.paymentMethod ? course.paymentMethod.toUpperCase() : 'N/A'}</p>
                                            <p class="text-gray-600">Transaction ID: ${course.transactionId || 'N/A'}</p>
                                            <p class="text-gray-500 text-xs">Enrolled: ${new Date(course.enrollmentDate).toLocaleDateString()}</p>
                                        </div>
                                        <div class="ml-4">
                                            <div class="mb-2">
                                                <span class="text-xs font-medium">Status:</span>
                                                <span class="ml-1 px-2 py-1 rounded text-xs ${
                                                    course.paymentStatus === 'Confirmed' || course.paymentStatus === 'Approved' ? 'bg-green-100 text-green-800' :
                                                    course.paymentStatus === 'Pending Verification' ? 'bg-yellow-100 text-yellow-800' :
                                                    course.paymentStatus === 'Rejected' ? 'bg-red-100 text-red-800' :
                                                    'bg-gray-100 text-gray-800'
                                                }">
                                                    ${course.paymentStatus || 'Confirmed'}
                                                </span>
                                            </div>
                                            ${course.paymentStatus === 'Pending Verification' ? `
                                                <div class="flex gap-1">
                                                    <button onclick="approvePayment('${student.id}', '${course.courseId}')" class="bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700">Approve</button>
                                                    <button onclick="rejectPayment('${student.id}', '${course.courseId}')" class="bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700">Reject</button>
                                                </div>
                                            ` : course.paymentStatus === 'Approved' || course.paymentStatus === 'Confirmed' ? `
                                                <div class="flex gap-1">
                                                    <button onclick="revokeAccess('${student.id}', '${course.courseId}')" class="bg-orange-600 text-white px-2 py-1 rounded text-xs hover:bg-orange-700">Revoke</button>
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : '<p class="text-sm text-gray-500 mt-2">No courses enrolled</p>'}
                </div>
            `).join('') || '<p class="text-gray-500">No students found for this filter.</p>';
        }

        function filterStudents(filter) {
            // Update button styles
            document.querySelectorAll('[id^="filter-"]').forEach(btn => {
                btn.classList.remove('bg-blue-600');
                btn.classList.add('bg-gray-600');
            });
            document.getElementById(`filter-${filter}`).classList.remove('bg-gray-600');
            document.getElementById(`filter-${filter}`).classList.add('bg-blue-600');
            
            populateStudentList(filter);
        }

        function approvePayment(studentId, courseId) {
            const student = students.find(s => s.id === studentId);
            if (student && student.enrolledCourses) {
                const course = student.enrolledCourses.find(c => c.courseId == courseId);
                if (course) {
                    course.paymentStatus = 'Approved';
                    course.approvalDate = new Date().toISOString();
                    saveData();
                    populateStudentList();
                    alert(`Payment approved for ${student.name}. They now have access to video lectures.`);
                }
            }
        }

        function rejectPayment(studentId, courseId) {
            const reason = prompt('Enter reason for rejection (optional):');
            const student = students.find(s => s.id === studentId);
            if (student && student.enrolledCourses) {
                const course = student.enrolledCourses.find(c => c.courseId == courseId);
                if (course) {
                    course.paymentStatus = 'Rejected';
                    course.rejectionReason = reason || 'Payment verification failed';
                    course.rejectionDate = new Date().toISOString();
                    saveData();
                    populateStudentList();
                    alert(`Payment rejected for ${student.name}. Reason: ${course.rejectionReason}`);
                }
            }
        }

        function revokeAccess(studentId, courseId) {
            if (confirm('Are you sure you want to revoke access for this student?')) {
                const student = students.find(s => s.id === studentId);
                if (student && student.enrolledCourses) {
                    const course = student.enrolledCourses.find(c => c.courseId == courseId);
                    if (course) {
                        course.paymentStatus = 'Access Revoked';
                        course.revocationDate = new Date().toISOString();
                        saveData();
                        populateStudentList();
                        alert(`Access revoked for ${student.name}.`);
                    }
                }
            }
        }

        function banStudent(studentId) {
            const reason = prompt('Enter reason for banning this student:');
            if (reason) {
                const student = students.find(s => s.id === studentId);
                if (student) {
                    student.status = 'banned';
                    student.banReason = reason;
                    student.banDate = new Date().toISOString();
                    saveData();
                    populateStudentList();
                    alert(`Student ${student.name} has been banned. Reason: ${reason}`);
                }
            }
        }

        function unbanStudent(studentId) {
            if (confirm('Are you sure you want to unban this student?')) {
                const student = students.find(s => s.id === studentId);
                if (student) {
                    student.status = 'active';
                    student.unbanDate = new Date().toISOString();
                    delete student.banReason;
                    saveData();
                    populateStudentList();
                    alert(`Student ${student.name} has been unbanned.`);
                }
            }
        }

        // Video Lecture Management Functions
        function showAddLectureForm() {
            document.getElementById('add-lecture-form').classList.remove('hidden');
        }

        function hideAddLectureForm() {
            document.getElementById('add-lecture-form').classList.add('hidden');
        }

        function addNewLecture() {
            const courseName = document.getElementById('new-lecture-course').value;
            const title = document.getElementById('new-lecture-title').value;
            const description = document.getElementById('new-lecture-description').value;
            const videoUrl = document.getElementById('new-lecture-video').value;
            const duration = document.getElementById('new-lecture-duration').value;

            if (!courseName || !title || !description || !videoUrl || !duration) {
                alert('Please fill all fields');
                return;
            }

            if (!videoLectures[courseName]) {
                videoLectures[courseName] = [];
            }

            videoLectures[courseName].push({
                id: Date.now(),
                title: title,
                description: description,
                videoUrl: videoUrl,
                duration: parseInt(duration),
                dateAdded: new Date().toISOString()
            });

            saveData();
            populateLectureManagement();
            hideAddLectureForm();
            
            // Clear form
            document.getElementById('new-lecture-course').value = '';
            document.getElementById('new-lecture-title').value = '';
            document.getElementById('new-lecture-description').value = '';
            document.getElementById('new-lecture-video').value = '';
            document.getElementById('new-lecture-duration').value = '';
            
            alert('Video lecture added successfully!');
        }

        function populateLectureManagement() {
            const lectureList = document.getElementById('lecture-management-list');
            let html = '';
            
            Object.keys(videoLectures).forEach(courseName => {
                html += `<div class="border p-4 rounded mb-4">
                    <h4 class="font-bold text-lg mb-2">${courseName}</h4>
                    <p class="text-gray-600 mb-3">${videoLectures[courseName].length} lectures</p>
                    <div class="space-y-2">
                        ${videoLectures[courseName].map((lecture, index) => `
                            <div class="bg-gray-50 p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <p class="font-medium">${index + 1}. ${lecture.title}</p>
                                        <p class="text-sm text-gray-600 mb-1">${lecture.description}</p>
                                        <div class="flex items-center text-xs text-gray-500">
                                            <span class="mr-4">‚è±Ô∏è ${lecture.duration} min</span>
                                            <span>üìÖ ${new Date(lecture.dateAdded).toLocaleDateString()}</span>
                                        </div>
                                    </div>
                                    <div class="ml-4 flex gap-2">
                                        <button onclick="editLecture('${courseName}', ${lecture.id})" class="bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700">Edit</button>
                                        <button onclick="deleteLecture('${courseName}', ${lecture.id})" class="bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700">Delete</button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
            });
            
            lectureList.innerHTML = html || '<p class="text-gray-500">No video lectures added yet.</p>';
        }

        function editLecture(courseName, lectureId) {
            const lecture = videoLectures[courseName].find(l => l.id === lectureId);
            if (!lecture) return;

            const newTitle = prompt('Lecture Title:', lecture.title);
            if (newTitle === null) return;

            const newDescription = prompt('Lecture Description:', lecture.description);
            if (newDescription === null) return;

            const newVideoUrl = prompt('Video URL:', lecture.videoUrl);
            if (newVideoUrl === null) return;

            const newDuration = prompt('Duration (minutes):', lecture.duration);
            if (newDuration === null) return;

            lecture.title = newTitle;
            lecture.description = newDescription;
            lecture.videoUrl = newVideoUrl;
            lecture.duration = parseInt(newDuration);

            saveData();
            populateLectureManagement();
            alert('Lecture updated successfully!');
        }

        function deleteLecture(courseName, lectureId) {
            if (confirm('Are you sure you want to delete this lecture?')) {
                videoLectures[courseName] = videoLectures[courseName].filter(l => l.id !== lectureId);
                if (videoLectures[courseName].length === 0) {
                    delete videoLectures[courseName];
                }
                saveData();
                populateLectureManagement();
                alert('Lecture deleted successfully!');
            }
        }

        function showAddCourseForm() {
            document.getElementById('add-course-form').classList.remove('hidden');
        }

        function hideAddCourseForm() {
            document.getElementById('add-course-form').classList.add('hidden');
        }

        function addNewCourse() {
            const name = document.getElementById('new-course-name').value;
            const description = document.getElementById('new-course-desc').value;
            const price = parseInt(document.getElementById('new-course-price').value);
            const duration = document.getElementById('new-course-duration').value;
            const level = document.getElementById('new-course-level').value;

            if (!name || !description || !price || !duration || !level) {
                alert('Please fill all fields');
                return;
            }

            const newCourse = {
                id: Date.now(),
                name: name,
                description: description,
                price: price,
                duration: duration,
                level: level,
                icon: "üìö",
                registrationFee: 50,
                courseFee: price - 75,
                otherFees: 25
            };

            courses.push(newCourse);
            saveData();
            renderCourses();
            populateCourseManagement();
            hideAddCourseForm();
            
            // Clear form
            document.getElementById('new-course-name').value = '';
            document.getElementById('new-course-desc').value = '';
            document.getElementById('new-course-price').value = '';
            document.getElementById('new-course-duration').value = '';
            document.getElementById('new-course-level').value = '';
            
            alert('Course added successfully!');
        }

        function editCourse(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            const newName = prompt('Course Name:', course.name);
            if (newName === null) return;

            const newDesc = prompt('Course Description:', course.description);
            if (newDesc === null) return;

            const newPrice = prompt('Course Price:', course.price);
            if (newPrice === null) return;

            course.name = newName;
            course.description = newDesc;
            course.price = parseInt(newPrice);
            course.courseFee = course.price - 75;

            saveData();
            renderCourses();
            populateCourseManagement();
            alert('Course updated successfully!');
        }

        function deleteCourse(courseId) {
            if (confirm('Are you sure you want to delete this course?')) {
                courses = courses.filter(c => c.id !== courseId);
                saveData();
                renderCourses();
                populateCourseManagement();
                alert('Course deleted successfully!');
            }
        }

        function showAddTestForm() {
            document.getElementById('add-test-form').classList.remove('hidden');
        }

        function hideAddTestForm() {
            document.getElementById('add-test-form').classList.add('hidden');
        }

        function addNewTest() {
            const courseName = document.getElementById('new-test-course').value;
            const question = document.getElementById('new-test-question').value;
            const option1 = document.getElementById('new-test-option1').value;
            const option2 = document.getElementById('new-test-option2').value;
            const option3 = document.getElementById('new-test-option3').value;
            const option4 = document.getElementById('new-test-option4').value;
            const correct = document.getElementById('new-test-correct').value;

            if (!courseName || !question || !option1 || !option2 || !option3 || !option4 || !correct) {
                alert('Please fill all fields');
                return;
            }

            if (!tests[courseName]) {
                tests[courseName] = [];
            }

            tests[courseName].push({
                question: question,
                options: [option1, option2, option3, option4],
                correct: parseInt(correct)
            });

            saveData();
            populateTestManagement();
            hideAddTestForm();
            
            // Clear form
            document.getElementById('new-test-course').value = '';
            document.getElementById('new-test-question').value = '';
            document.getElementById('new-test-option1').value = '';
            document.getElementById('new-test-option2').value = '';
            document.getElementById('new-test-option3').value = '';
            document.getElementById('new-test-option4').value = '';
            document.getElementById('new-test-correct').value = '';
            
            alert('Test question added successfully!');
        }

        // New functions for enhanced features
        function showCourseDetails(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            const detailsContent = document.getElementById('course-details-content');
            detailsContent.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <div class="text-4xl mr-4">${course.icon}</div>
                        <div>
                            <h4 class="text-2xl font-bold">${course.name}</h4>
                            <p class="text-gray-600">${course.level} ‚Ä¢ ${course.duration}</p>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">${course.description}</p>
                </div>

                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h5 class="font-bold mb-3 text-blue-800">üìö Course Modules</h5>
                        <ul class="space-y-1">
                            ${course.details.modules.map(module => `<li class="text-sm text-blue-700">‚Ä¢ ${module}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h5 class="font-bold mb-3 text-green-800">‚ÑπÔ∏è Course Information</h5>
                        <div class="space-y-2 text-sm">
                            <p><strong>Prerequisites:</strong> ${course.details.prerequisites}</p>
                            <p><strong>Instructor:</strong> ${course.details.instructor}</p>
                            <p><strong>Class Size:</strong> ${course.details.classSize}</p>
                            <p><strong>Certification:</strong> ${course.details.certification}</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg mb-6">
                    <h5 class="font-semibold mb-3">üí∞ Fee Structure</h5>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="flex justify-between">
                            <span>Registration Fee:</span>
                            <span class="font-semibold">‚Çπ${course.registrationFee.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Course Fee:</span>
                            <span class="font-semibold">‚Çπ${course.courseFee.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Materials & Certificate:</span>
                            <span class="font-semibold">‚Çπ${course.otherFees.toLocaleString('en-IN')}</span>
                        </div>
                        <div class="flex justify-between text-lg font-bold text-green-600">
                            <span>Total Amount:</span>
                            <span>‚Çπ${course.price.toLocaleString('en-IN')}</span>
                        </div>
                    </div>
                </div>

                <div class="flex gap-4">
                    <button onclick="enrollInCourse(${course.id}); closeModal('course-details-modal')" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-semibold">
                        Enroll Now
                    </button>
                    <button onclick="closeModal('course-details-modal')" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        Close
                    </button>
                </div>
            `;

            document.getElementById('course-details-modal').classList.remove('hidden');
        }

        function showCodeEditor() {
            const codeEditorContent = document.getElementById('code-editor-content');
            codeEditorContent.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Code Editor Panel -->
                    <div class="space-y-4">
                        <div class="flex items-center gap-4 mb-4">
                            <label class="font-semibold">Language:</label>
                            <select id="language-select" onchange="changeLanguage()" class="p-2 border rounded-lg">
                                <option value="c">C</option>
                                <option value="cpp">C++</option>
                                <option value="java">Java</option>
                                <option value="python">Python</option>
                                <option value="javascript">JavaScript</option>
                                <option value="html">HTML</option>
                            </select>
                            <button onclick="runCode()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-semibold">
                                ‚ñ∂Ô∏è Run Code
                            </button>
                            <button onclick="clearEditor()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
                                üóëÔ∏è Clear
                            </button>
                        </div>
                        
                        <div class="bg-gray-900 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-green-400 font-mono text-sm">Code Editor</span>
                                <span class="text-gray-400 text-xs" id="language-indicator">C</span>
                            </div>
                            <textarea id="code-textarea" class="w-full h-96 bg-gray-800 text-green-400 font-mono text-sm p-4 rounded border-none resize-none focus:outline-none focus:ring-2 focus:ring-green-500" 
                                placeholder="Write your code here..." spellcheck="false">${codeTemplates.c}</textarea>
                        </div>
                        
                        <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-800 mb-2">üí° Quick Tips:</h5>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>‚Ä¢ Use Ctrl+A to select all code</li>
                                <li>‚Ä¢ Code will be simulated (no actual compilation)</li>
                                <li>‚Ä¢ Try different programming languages</li>
                                <li>‚Ä¢ Perfect for learning and practice</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Output Panel -->
                    <div class="space-y-4">
                        <div class="bg-gray-900 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-blue-400 font-mono text-sm">Output Console</span>
                                <button onclick="clearOutput()" class="text-gray-400 hover:text-white text-xs">Clear</button>
                            </div>
                            <div id="output-console" class="w-full h-96 bg-gray-800 text-white font-mono text-sm p-4 rounded overflow-y-auto">
                                <div class="text-gray-400">Ready to run your code...</div>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg">
                            <h5 class="font-semibold text-yellow-800 mb-2">‚ö†Ô∏è Note:</h5>
                            <p class="text-sm text-yellow-700">
                                This is a demo code editor. Output is simulated for educational purposes. 
                                For real compilation, use professional IDEs like VS Code, IntelliJ, or online compilers.
                            </p>
                        </div>
                        
                        <div class="bg-green-50 border border-green-200 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-800 mb-2">üéØ Sample Programs:</h5>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="loadSample('hello')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">Hello World</button>
                                <button onclick="loadSample('loop')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">For Loop</button>
                                <button onclick="loadSample('function')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">Function</button>
                                <button onclick="loadSample('array')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">Array</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('code-editor-modal').classList.remove('hidden');
        }

        function changeLanguage() {
            const language = document.getElementById('language-select').value;
            const codeTextarea = document.getElementById('code-textarea');
            const languageIndicator = document.getElementById('language-indicator');
            
            codeTextarea.value = codeTemplates[language];
            languageIndicator.textContent = language.toUpperCase();
        }

        function clearEditor() {
            document.getElementById('code-textarea').value = '';
        }

        function clearOutput() {
            document.getElementById('output-console').innerHTML = '<div class="text-gray-400">Output cleared...</div>';
        }

        function runCode() {
            const code = document.getElementById('code-textarea').value;
            const language = document.getElementById('language-select').value;
            const outputConsole = document.getElementById('output-console');
            
            if (!code.trim()) {
                outputConsole.innerHTML = '<div class="text-red-400">Error: No code to run!</div>';
                return;
            }
            
            // Simulate code execution
            outputConsole.innerHTML = '<div class="text-yellow-400">Compiling and running...</div>';
            
            setTimeout(() => {
                let output = '';
                
                // Simple simulation based on language and code content
                if (language === 'html') {
                    output = `<div class="text-green-400">‚úÖ HTML code is valid!</div>
                             <div class="text-blue-400">üìÑ HTML Preview:</div>
                             <div class="bg-white text-black p-2 rounded mt-2 border">
                                 <iframe srcdoc="${code.replace(/"/g, '&quot;')}" class="w-full h-32 border-none"></iframe>
                             </div>`;
                } else if (code.toLowerCase().includes('hello')) {
                    output = `<div class="text-green-400">‚úÖ Compilation successful!</div>
                             <div class="text-white">Hello, World!</div>
                             <div class="text-gray-400 mt-2">Program executed successfully.</div>`;
                } else if (code.includes('for') || code.includes('while')) {
                    output = `<div class="text-green-400">‚úÖ Compilation successful!</div>
                             <div class="text-white">1</div>
                             <div class="text-white">2</div>
                             <div class="text-white">3</div>
                             <div class="text-white">4</div>
                             <div class="text-white">5</div>
                             <div class="text-gray-400 mt-2">Loop executed successfully.</div>`;
                } else if (code.includes('function') || code.includes('def ') || code.includes('int ')) {
                    output = `<div class="text-green-400">‚úÖ Compilation successful!</div>
                             <div class="text-white">Function result: 42</div>
                             <div class="text-gray-400 mt-2">Function executed successfully.</div>`;
                } else {
                    output = `<div class="text-green-400">‚úÖ Compilation successful!</div>
                             <div class="text-white">Program output would appear here</div>
                             <div class="text-gray-400 mt-2">Execution completed.</div>`;
                }
                
                outputConsole.innerHTML = output;
            }, 1500);
        }

        function loadSample(type) {
            const language = document.getElementById('language-select').value;
            const codeTextarea = document.getElementById('code-textarea');
            
            let sampleCode = '';
            
            switch(type) {
                case 'hello':
                    sampleCode = codeTemplates[language];
                    break;
                case 'loop':
                    if (language === 'c' || language === 'cpp') {
                        sampleCode = `#include <stdio.h>

int main() {
    for(int i = 1; i <= 5; i++) {
        printf("%d\\n", i);
    }
    return 0;
}`;
                    } else if (language === 'java') {
                        sampleCode = `public class Main {
    public static void main(String[] args) {
        for(int i = 1; i <= 5; i++) {
            System.out.println(i);
        }
    }
}`;
                    } else if (language === 'python') {
                        sampleCode = `for i in range(1, 6):
    print(i)`;
                    } else if (language === 'javascript') {
                        sampleCode = `for(let i = 1; i <= 5; i++) {
    console.log(i);
}`;
                    }
                    break;
                case 'function':
                    if (language === 'c' || language === 'cpp') {
                        sampleCode = `#include <stdio.h>

int add(int a, int b) {
    return a + b;
}

int main() {
    int result = add(5, 3);
    printf("Result: %d\\n", result);
    return 0;
}`;
                    } else if (language === 'python') {
                        sampleCode = `def add(a, b):
    return a + b

result = add(5, 3)
print(f"Result: {result}")`;
                    }
                    break;
                case 'array':
                    if (language === 'c' || language === 'cpp') {
                        sampleCode = `#include <stdio.h>

int main() {
    int arr[] = {1, 2, 3, 4, 5};
    int size = 5;
    
    for(int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\\n");
    return 0;
}`;
                    } else if (language === 'python') {
                        sampleCode = `arr = [1, 2, 3, 4, 5]

for num in arr:
    print(num, end=" ")
print()`;
                    }
                    break;
            }
            
            if (sampleCode) {
                codeTextarea.value = sampleCode;
            }
        }

        function showVideoLectures() {
            if (!currentUser) {
                alert('Please login first to access video lectures.');
                showLogin();
                return;
            }

            if (currentUser.type === 'admin') {
                alert('Admins cannot access student lectures. Use Admin Panel to manage lectures.');
                return;
            }

            // Check if student has paid for any courses
            const hasAccess = currentUser.enrolledCourses && 
                             currentUser.enrolledCourses.some(course => 
                                 course.paymentStatus === 'Confirmed' || 
                                 course.paymentStatus === 'Approved'
                             );

            if (!hasAccess) {
                const videoLecturesContent = document.getElementById('video-lectures-content');
                videoLecturesContent.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üîí</div>
                        <h4 class="text-2xl font-bold mb-4 text-red-600">Access Denied</h4>
                        <p class="text-gray-600 mb-6">You need to enroll and complete payment for a course to access video lectures.</p>
                        <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6">
                            <p class="text-yellow-800">
                                <strong>To get access:</strong><br>
                                1. Enroll in any course<br>
                                2. Complete the payment<br>
                                3. Wait for admin approval<br>
                                4. Access will be granted within 24 hours
                            </p>
                        </div>
                        <button onclick="scrollToCourses(); closeModal('video-lectures-modal')" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold">
                            Browse Courses
                        </button>
                    </div>
                `;
            } else {
                // Show available lectures for enrolled courses
                const enrolledCourses = currentUser.enrolledCourses.filter(course => 
                    course.paymentStatus === 'Confirmed' || course.paymentStatus === 'Approved'
                );
                
                let lecturesHtml = '';
                enrolledCourses.forEach(course => {
                    const courseLectures = videoLectures[course.courseName] || [];
                    if (courseLectures.length > 0) {
                        lecturesHtml += `
                            <div class="mb-8">
                                <h4 class="text-xl font-bold mb-4 text-blue-600">${course.courseName}</h4>
                                <div class="grid gap-4">
                                    ${courseLectures.map((lecture, index) => `
                                        <div class="border rounded-lg p-4 hover:shadow-md transition">
                                            <div class="flex items-start justify-between">
                                                <div class="flex-1">
                                                    <h5 class="font-semibold mb-2">${index + 1}. ${lecture.title}</h5>
                                                    <p class="text-gray-600 text-sm mb-2">${lecture.description}</p>
                                                    <div class="flex items-center text-sm text-gray-500">
                                                        <span class="mr-4">‚è±Ô∏è ${lecture.duration} minutes</span>
                                                        <span>üìÖ Added: ${new Date(lecture.dateAdded).toLocaleDateString()}</span>
                                                    </div>
                                                </div>
                                                <button onclick="playVideo('${lecture.videoUrl}', '${lecture.title}')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 ml-4">
                                                    ‚ñ∂Ô∏è Watch
                                                </button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                    }
                });

                const videoLecturesContent = document.getElementById('video-lectures-content');
                videoLecturesContent.innerHTML = lecturesHtml || `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üìö</div>
                        <h4 class="text-2xl font-bold mb-4">No Lectures Available</h4>
                        <p class="text-gray-600">Lectures for your enrolled courses will appear here once added by instructors.</p>
                    </div>
                `;
            }

            document.getElementById('video-lectures-modal').classList.remove('hidden');
        }

        function playVideo(videoUrl, title) {
            // Extract video ID from YouTube URL
            let embedUrl = videoUrl;
            if (videoUrl.includes('youtube.com/watch?v=')) {
                const videoId = videoUrl.split('v=')[1].split('&')[0];
                embedUrl = `https://www.youtube.com/embed/${videoId}`;
            } else if (videoUrl.includes('youtu.be/')) {
                const videoId = videoUrl.split('youtu.be/')[1].split('?')[0];
                embedUrl = `https://www.youtube.com/embed/${videoId}`;
            }

            const videoPlayer = document.createElement('div');
            videoPlayer.className = 'fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center';
            videoPlayer.innerHTML = `
                <div class="bg-white rounded-lg p-4 max-w-4xl w-full mx-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">${title}</h3>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    <div class="aspect-video">
                        <iframe src="${embedUrl}" class="w-full h-full rounded" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            `;
            document.body.appendChild(videoPlayer);
        }

        function showSampleTest() {
            const sampleTestContent = document.getElementById('sample-test-content');
            sampleTestContent.innerHTML = `
                <div class="mb-6">
                    <p class="text-gray-600 mb-4">Test your basic programming knowledge with this sample test. This will give you an idea of the type of questions in our entrance tests.</p>
                    <div class="bg-yellow-50 border border-yellow-200 p-3 rounded mb-4">
                        <p class="text-sm text-yellow-800">
                            <strong>Instructions:</strong> Answer all questions. You need 60% to pass. This is just a demo - no registration required!
                        </p>
                    </div>
                </div>
                <form id="sample-test-form">
                    ${sampleTests.map((q, index) => `
                        <div class="mb-6 p-4 border rounded-lg">
                            <h5 class="font-semibold mb-3">${index + 1}. ${q.question}</h5>
                            ${q.options.map((option, optIndex) => `
                                <label class="block mb-2 cursor-pointer hover:bg-gray-50 p-2 rounded">
                                    <input type="radio" name="sample_question_${index}" value="${optIndex + 1}" class="mr-2">
                                    <span class="font-medium">${String.fromCharCode(65 + optIndex)}.</span> ${option}
                                </label>
                            `).join('')}
                        </div>
                    `).join('')}
                    <div class="flex gap-4">
                        <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 font-semibold">Submit Test</button>
                        <button type="button" onclick="closeModal('sample-test-modal')" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700">Cancel</button>
                    </div>
                </form>
            `;

            document.getElementById('sample-test-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                let score = 0;
                let results = [];
                
                sampleTests.forEach((q, index) => {
                    const answer = formData.get(`sample_question_${index}`);
                    const isCorrect = parseInt(answer) === q.correct;
                    if (isCorrect) score++;
                    
                    results.push({
                        question: q.question,
                        userAnswer: answer ? q.options[parseInt(answer) - 1] : 'Not answered',
                        correctAnswer: q.options[q.correct - 1],
                        isCorrect: isCorrect,
                        explanation: q.explanation
                    });
                });

                const percentage = (score / sampleTests.length) * 100;
                showTestResults(score, sampleTests.length, percentage, results);
            });

            document.getElementById('sample-test-modal').classList.remove('hidden');
        }

        function showTestResults(score, total, percentage, results) {
            const sampleTestContent = document.getElementById('sample-test-content');
            const passed = percentage >= 60;
            
            sampleTestContent.innerHTML = `
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">${passed ? 'üéâ' : 'üìö'}</div>
                    <h4 class="text-2xl font-bold mb-2 ${passed ? 'text-green-600' : 'text-orange-600'}">
                        ${passed ? 'Congratulations!' : 'Keep Learning!'}
                    </h4>
                    <p class="text-lg mb-4">You scored ${score} out of ${total} (${percentage.toFixed(1)}%)</p>
                    <div class="bg-${passed ? 'green' : 'orange'}-50 border border-${passed ? 'green' : 'orange'}-200 p-4 rounded-lg mb-6">
                        <p class="text-${passed ? 'green' : 'orange'}-800">
                            ${passed 
                                ? 'Great job! You have a good foundation in programming concepts. Consider enrolling in our courses to advance your skills further.' 
                                : 'Don\'t worry! Everyone starts somewhere. Our courses are designed to help you build strong programming fundamentals from the ground up.'}
                        </p>
                    </div>
                </div>

                <div class="mb-6">
                    <h5 class="font-bold mb-4">üìã Detailed Results:</h5>
                    <div class="space-y-4">
                        ${results.map((result, index) => `
                            <div class="border rounded-lg p-4 ${result.isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}">
                                <div class="flex items-start mb-2">
                                    <span class="text-lg mr-2">${result.isCorrect ? '‚úÖ' : '‚ùå'}</span>
                                    <div class="flex-1">
                                        <p class="font-medium mb-2">${index + 1}. ${result.question}</p>
                                        <p class="text-sm mb-1"><strong>Your answer:</strong> ${result.userAnswer}</p>
                                        <p class="text-sm mb-2"><strong>Correct answer:</strong> ${result.correctAnswer}</p>
                                        ${result.explanation ? `<p class="text-sm text-gray-600 italic">${result.explanation}</p>` : ''}
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="flex gap-4 justify-center">
                    <button onclick="showSampleTest()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">Retake Test</button>
                    <button onclick="scrollToCourses(); closeModal('sample-test-modal')" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">View Courses</button>
                    <button onclick="closeModal('sample-test-modal')" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700">Close</button>
                </div>
            `;
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97eea66fe1d66eb9',t:'MTc1NzgzOTk2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
